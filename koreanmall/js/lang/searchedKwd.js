var max_cookie=5;var max_cookie=5;var cookie_nm="keywords";var separator="__";var short_flag=true;var short_len=8;function setCookie(name,value,expiredays){var today=new Date();today.setDate(today.getDate()+expiredays);document.cookie=name+"="+escape(value)+"; path=/; expires="+today.toGMTString()+";";}function getCookie(name){cookie=document.cookie;name=name+"=";idx=cookie.indexOf(name);if(cookie&&idx>=0){tmp=cookie.substring(idx,cookie.length);deli=tmp.indexOf(";");if(deli>0){return tmp.substring(name.length,deli);}else{return tmp.substring(name.length);}}}function callKwdCookie(_kwd){var tempStr=null;var cookieStr="";var kwd="";if(getCookie(cookie_nm)!=null){cookieStr=getCookie(cookie_nm);tempStr=cookieStr.split(separator);if(tempStr.length>1){for(var i=0;i<tempStr.length;i++){if(unescape(tempStr[i])==_kwd){kwd=unescape(cookieStr);break;}if(i==tempStr.length-1){if(tempStr.length<max_cookie){kwd=unescape(cookieStr)+separator+_kwd;}else{for(var j=1;j<tempStr.length;j++){kwd=kwd+unescape(tempStr[j])+separator;if(j==tempStr.length-1){kwd=kwd+_kwd;}}}}}}else{if(unescape(cookieStr)==_kwd||(unescape(cookieStr)=="")){kwd=_kwd;}else{kwd=unescape(cookieStr)+separator+_kwd;}}}else{kwd=_kwd;}setCookie(cookie_nm,kwd,365);}function delKwdLst(kwd){var cookie_str=null;var temp_str=null;var rtn_str="";var sepa_len=separator.length;if(getCookie(cookie_nm)!=null){cookie_str=getCookie(cookie_nm);temp_str=cookie_str.split(separator);if(temp_str.length>0){for(var i=0;i<temp_str.length;i++){if(unescape(temp_str[i])!=kwd){if(i==temp_str.length-1){rtn_str+=unescape(temp_str[i]);}else{rtn_str+=unescape(temp_str[i])+separator;}}}}if(rtn_str.length>sepa_len){if(rtn_str.substring(rtn_str.length-sepa_len,rtn_str.length)==separator){rtn_str=rtn_str.substring(0,rtn_str.length-sepa_len);}}setCookie(cookie_nm,rtn_str,365);}drawSearchedKwd();}function drawSearchedKwd(){var temp_val="";var temp_str=null;var mySearchKwdHtml="";var rct_kwd="";if(getCookie(cookie_nm)!=null){temp_val=getCookie(cookie_nm);if(temp_val!=""){temp_str=temp_val.split(separator);if(temp_str.length>0){mySearchKwdHtml+="<strong>Search History</strong>";for(var i=0;i<temp_str.length;i++){rct_kwd=unescape(temp_str[i]);if(i==0){mySearchKwdHtml+="&nbsp;";}mySearchKwdHtml+="<span>";if(short_flag==true&&rct_kwd.length>short_len){mySearchKwdHtml+="<a href=\"javascript:goKwd('"+rct_kwd+"');\" style=\"cursor:pointer;\" title\""+rct_kwd+"\" >"+rct_kwd.substring(0,short_len)+"...</a>";}else{mySearchKwdHtml+="<a href=\"javascript:goKwd('"+rct_kwd+"');\" style=\"cursor:pointer;\" title\""+rct_kwd+"\" >"+rct_kwd+"</a>";}mySearchKwdHtml+="<a href=\"javascript:delKwdLst('"+rct_kwd+"');\" class=\"del\" style=\"cursor:pointer;\" title=\""+rct_kwd+"\"> X </a>";mySearchKwdHtml+="</span>";}}}}$("#searchedKwd").html(mySearchKwdHtml);}